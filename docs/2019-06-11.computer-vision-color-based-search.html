<!DOCTYPE html>

<head>
    <title>JOE MAKES</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" href="favicon.jpg" />
</head>

<div>
    <h1 class="title">JOE MAKES</h1>
    <p>
        <!--<a href='index.html'>HOME</a> / <a href='listen.html'>LISTEN</a> / <a href="archive.html">ARCHIVE</a> / <a href="shop.html">SHOP</a>-->
        <a href='index.html'>HOME</a> / <a href='https://www.youtube.com/channel/UCpi9d158eNHx1bXs5ZzXPUA'>SHOW</a> / <a href='https://josephsamela.github.io/hosttheworld'>PODCAST</a> / <a href="archive.html">PROJECTS</a> 
    </p>
    <p class="horizontal-rule">
        &#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;
    </p>
    <div>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>2019-06-11.computer-vision-color-based-search</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><br><a href="https://github.com/JosephSamela/computer-vision-color-based-search">See project on github!</a></p>
<h1 id="find-the-red-car">Find-the-red-car</h1>
<p><em>computer-vision-color-based-search</em></p>
<p>Special forces mobilize! Computer vision activate! Enhance!</p>
<p>In this exercise I use the python imaging library to locate red cars from aerial images of parking lots. To understand the surveillance state…you must become the surveillance state! Wait, that can’t be right…</p>
<iframe style="position:relative;top:0;left:0;width:100%;height:calc(90vw/1.777778);max-height: 395px;min-height: 255px;" src="https://www.youtube.com/embed/LGyyDVzkbr4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
<h2 id="setup">Setup</h2>
<p>Install <code>python3</code> for your distribution.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode abc"><code class="sourceCode abc"><span id="cb1-1"><a href="#cb1-1"></a>$ sudo apt install python3</span></code></pre></div>
<p>Install required python imaging library.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode abc"><code class="sourceCode abc"><span id="cb2-1"><a href="#cb2-1"></a>$ pip install pillow --upgrade</span></code></pre></div>
<h2 id="usage">Usage</h2>
<p>The script is run from command line in the form:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode abc"><code class="sourceCode abc"><span id="cb3-1"><a href="#cb3-1"></a>$ python main.py /path/to/img.jpg x_grid y_grid</span></code></pre></div>
<p>For example, to process <code>back-parking.jpg</code> with a <code>5x5</code> grid run:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode abc"><code class="sourceCode abc"><span id="cb4-1"><a href="#cb4-1"></a>$ python main.py back-parking.jpg 5 5</span></code></pre></div>
<p>Images of each tile are written to <code>./tiles</code> . Each tile is a <code>.jpg</code> named in the pattern <code>rank.coordinates.score.jpg</code>. Where <code>rank</code> is the tile rank, from <code>0</code> = most-red and <code>n</code> = least-red. <code>coordinates</code> are coordinates of the tile within the original photo. <code>score</code> is a score indicating the amount of red present.</p>
<h2 id="explanation">Explanation</h2>
<h3 id="the-goal">0. The goal</h3>
<p>The task given was to break the provided image into an <code>nxn</code> grid of tiles - then calculate the amount of the color red present in each tile.</p>
<p>The provided photo was of a parking lot with several red cars.</p>
<h3 id="creating-tiles">1. Creating tiles</h3>
<p>The original image is broken into a grid of tiles. For example, <code>5x5</code> <code>8x3</code> <code>10x6</code> etc. Each tile has the same dimensions, determined by <code>width x height</code> of the original image.</p>
<p>Each tile is described by two coordinates…</p>
<p><code>a</code> is the upper-left</p>
<p><code>b</code> is the bottom-right</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode abc"><code class="sourceCode abc"><span id="cb5-1"><a href="#cb5-1"></a>a  _______</span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="ch">|</span>       <span class="ch">|</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="ch">|</span>  tile <span class="ch">|</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  <span class="ch">|</span>       <span class="ch">|</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>   ------- b</span></code></pre></div>
<p>To fully describe a tile the following the coordinates of <em>both</em> <code>a</code> and <code>b</code> within the original image.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode abc"><code class="sourceCode abc"><span id="cb6-1"><a href="#cb6-1"></a><span class="dt">(</span>a1, a2, b1, b2<span class="dt">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode abc"><code class="sourceCode abc"><span id="cb7-1"><a href="#cb7-1"></a><span class="dt">(</span>0 ,0 ,100 ,100<span class="dt">)</span></span></code></pre></div>
<h3 id="scoring-tiles">2. Scoring tiles</h3>
<p>For each tile in the original image we need to calculate the amount of <em>red</em> that appears.</p>
<p>The “redness” of each pixel is calculated as:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode abc"><code class="sourceCode abc"><span id="cb8-1"><a href="#cb8-1"></a>redness = RED - GREEN - BLUE</span></code></pre></div>
<p>For example, take this candy-apple red color <code>(227,46,86)</code></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode abc"><code class="sourceCode abc"><span id="cb9-1"><a href="#cb9-1"></a>redness = 227-46-86 = 95</span></code></pre></div>
<p>The total score indicating the amount of red in the tile is the sum of the “redness” of each pixel. Tiles with much red will score higher, tiles without red will score lower.</p>
<p>The tiles are then ranked by their score. The <code>0</code>th tile contains the MOST red and <code>n</code>th tile contains the LEAST red.</p>
<h3 id="analyzing-results">3. Analyzing results</h3>
<p>Sifting through the ranked tiles - the program certainly <em>seems</em> to be identifying tiles by amount of red. However, to better communicate this the concept of <em>focusing</em> one last image is created.</p>
<p>Each tile is darkened/brightened by its <code>rank</code>. The tiles are then re-assembled into a final image showing visually how the program focuses on red areas of the image.</p>
<h4 id="original-image">Original Image</h4>
<p><img src="https://raw.githubusercontent.com/JosephSamela/computer-vision-color-based-search/master/back-parking.jpg" /></p>
<h4 id="focused-image-coarse-grid">Focused Image, coarse-grid</h4>
<p><img src="https://raw.githubusercontent.com/JosephSamela/computer-vision-color-based-search/master/back-parking-focused-coarse.jpg" /></p>
<h4 id="focused-image-fine-grid">Focused Image, fine-grid</h4>
<p><img src="https://raw.githubusercontent.com/JosephSamela/computer-vision-color-based-search/master/back-parking-focused-fine.jpg" /></p>
<h4 id="another-image">Another Image</h4>
<p><img src="https://raw.githubusercontent.com/JosephSamela/computer-vision-color-based-search/master/parking-lot-3.jpg" /></p>
<h4 id="another-image-coarse-grid">Another Image, coarse-grid</h4>
<p><img src="https://raw.githubusercontent.com/JosephSamela/computer-vision-color-based-search/master/parking-lot-3-coarse.jpg" /></p>
<h4 id="another-image-fine-grid">Another Image, fine-grid</h4>
<p><img src="https://raw.githubusercontent.com/JosephSamela/computer-vision-color-based-search/master/parking-lot-3-fine.jpg" /></p>
</body>
</html>
<footer>
    <div>
        <p class="horizontal-rule">
            &#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;&#x2592;</p>
        <p>
            <strong>JOE MAKES</strong> &#xa9; 2019 <a href='https://josephsamela.github.io/'>Joseph Samela</a></p>
    </div>
</footer>
Site generated 2019-12-31
